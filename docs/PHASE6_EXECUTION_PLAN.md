# Phase 6 残タスク実行計画

## 現状ステータス
- **Supabase**: RLSポリシー修正完了（Dashboard経由で適用済み）。
- **E2Eテスト**: `room-flow.spec.ts` がルーム作成後の遷移で失敗していたが、RLS修正により解消が見込まれる。
- **UI/UX**: エラーハンドリングは概ね実装済み。タイマー同期とモバイル対応が未完了。

## 実行ステップ

### 1. E2Eテストによる修正確認 (優先度: 高)
RLSポリシー修正が正しく機能し、ゲームフローが通ることを確認します。
- **タスク**: `npx playwright test room-flow.spec.ts` の再実行
- **期待値**: ルーム作成後、ロビーへ正常に遷移し、ゲームが最後まで進行すること。
- **対応**: 失敗した場合は、ブラウザコンソールログを確認し、APIエラーの詳細を特定する。

### 2. タイマー同期の改善 (優先度: 中)
クライアント時刻依存を排除し、サーバー時刻ベースのタイマーを実装します。
- **現状**: `created_at` (Server) + `time_limit` で計算しているが、クライアントの時計がずれていると表示がずれる。
- **修正方針**:
  1. `game_sessions` テーブルの `deadline_epoch` カラムを活用する。
  2. `startGame` APIで `deadline_epoch` (現在時刻 + 制限時間) を計算して保存する。
  3. クライアント側は `deadline_epoch` (絶対時刻) に向かってカウントダウンする。

### 3. UI/UX ブラッシュアップ (優先度: 中)
- **モバイル表示確認**: ブラウザの開発者ツールでモバイルエミュレーションを行い、崩れがないか確認。
- **エラーハンドリング**: `toast` の表示確認。

### 4. 最終手動テスト
- 複数ブラウザ/デバイスでの同時接続テスト。
