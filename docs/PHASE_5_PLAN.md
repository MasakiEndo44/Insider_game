# Phase 5 å®Ÿè£…è¨ˆç”»: UI/UXæ”¹å–„ & ãƒ‡ãƒ—ãƒ­ã‚¤æº–å‚™

**ç­–å®šæ—¥**: 2025-11-23  
**å‰ææ¡ä»¶**: Phase 4 (Supabaseçµ±åˆ) å®Œäº†  
**ç›®æ¨™æœŸé–“**: Week 9-10 (2é€±é–“)

---

## ğŸ“‹ Phase 5ã®ç›®æ¨™

Phase 4ã§ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰åŸºç›¤ï¼ˆSupabase Database, Auth, Realtime, Edge Functionsï¼‰ãŒæ•´ã£ãŸãŸã‚ã€Phase 5ã§ã¯**ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã®å‘ä¸Š**ã¨**æœ¬ç•ªé‹ç”¨ã«å‘ã‘ãŸæº–å‚™**ã‚’è¡Œã„ã¾ã™ã€‚

### ä¸»è¦ç›®æ¨™
1. **å®Ÿç’°å¢ƒã§ã®å‹•ä½œæ¤œè¨¼**: è¤‡æ•°ãƒ–ãƒ©ã‚¦ã‚¶ã§ã®E2Eãƒ†ã‚¹ãƒˆã‚’å®Ÿæ–½ã—ã€å®Ÿéš›ã®ãƒãƒ«ãƒãƒ—ãƒ¬ã‚¤ç’°å¢ƒã§ã®å®‰å®šæ€§ã‚’ç¢ºèª
2. **UI/UXã®æ”¹å–„**: ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤ºã€ã‚¨ãƒ©ãƒ¼é€šçŸ¥ã€ãƒˆãƒ¼ã‚¹ãƒˆå®Ÿè£…ã«ã‚ˆã‚‹ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯å¼·åŒ–
3. **æŠ•ç¥¨ãƒ­ã‚¸ãƒƒã‚¯ã®æ”¹å–„**: è¤‡æ•°ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç’°å¢ƒã§ã®æŠ•ç¥¨è‡ªå‹•é·ç§»ã®å®‰å®šåŒ–
4. **ãƒ‡ãƒ—ãƒ­ã‚¤æº–å‚™**: Vercelã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã¨ç’°å¢ƒå¤‰æ•°ã®è¨­å®š
5. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™**: README.mdæ›´æ–°ã€ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †ã®æ–‡æ›¸åŒ–

---

## ğŸ¯ å„ªå…ˆåº¦ã¨æ¨å¥¨é †åº

| å„ªå…ˆåº¦ | ã‚¿ã‚¹ã‚¯ | ç†ç”± |
|--------|--------|------|
| **P0** | è¤‡æ•°ãƒ–ãƒ©ã‚¦ã‚¶ã§ã®E2Eãƒ†ã‚¹ãƒˆ | ç¾çŠ¶ã®èª²é¡Œï¼ˆæŠ•ç¥¨é·ç§»ã®ä¸å®‰å®šæ€§ï¼‰ã®æ¤œè¨¼ãŒæœ€å„ªå…ˆ |
| **P0** | æŠ•ç¥¨ãƒ­ã‚¸ãƒƒã‚¯ã®æ”¹å–„ | ãƒ†ã‚¹ãƒˆçµæœã«åŸºã¥ãä¿®æ­£ãŒå¿…è¦ |
| **P1** | UIãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯æ”¹å–„ | ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã®å¤§å¹…ãªå‘ä¸ŠãŒè¦‹è¾¼ã‚ã‚‹ |
| **P1** | ãƒ‡ãƒ—ãƒ­ã‚¤æº–å‚™ | æœ¬ç•ªç’°å¢ƒã§ã®æ¤œè¨¼ãŒå¿…è¦ |
| **P2** | ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™ | ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã«æœ€çµ‚æ›´æ–° |

---

## ğŸ“¦ ã‚¿ã‚¹ã‚¯è©³ç´°

### 1. è¤‡æ•°ãƒ–ãƒ©ã‚¦ã‚¶ã§ã®E2Eãƒ†ã‚¹ãƒˆ (Week 9 - Day 1-2)

#### ç›®æ¨™
å®Ÿéš›ã®ãƒãƒ«ãƒãƒ—ãƒ¬ã‚¤ç’°å¢ƒã§ã®ã‚²ãƒ¼ãƒ ãƒ•ãƒ­ãƒ¼å…¨ä½“ã‚’æ¤œè¨¼ã—ã€Phase 4ã§ç™ºè¦‹ã•ã‚ŒãŸèª²é¡Œï¼ˆæŠ•ç¥¨ãƒ•ã‚§ãƒ¼ã‚ºã®é·ç§»ä¸å®‰å®šæ€§ï¼‰ã‚’ç¢ºèªãƒ»ä¿®æ­£ã™ã‚‹ã€‚

#### å®Ÿæ–½å†…å®¹

**1.1 ãƒ†ã‚¹ãƒˆç’°å¢ƒæº–å‚™**
- 3å°ä»¥ä¸Šã®ãƒ–ãƒ©ã‚¦ã‚¶/ãƒ‡ãƒã‚¤ã‚¹ã‚’ç”¨æ„ï¼ˆChrome, Safari, Firefoxç­‰ï¼‰
- å„ãƒ–ãƒ©ã‚¦ã‚¶ã§ç•°ãªã‚‹ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³
- ãƒ†ã‚¹ãƒˆæ‰‹é †æ›¸ã®ä½œæˆï¼ˆ`docs/PHASE_5_E2E_TEST_SCENARIOS.md`ï¼‰

**1.2 ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ª**

##### ã‚·ãƒŠãƒªã‚ª1: åŸºæœ¬ãƒ•ãƒ­ãƒ¼ï¼ˆ3äººãƒ—ãƒ¬ã‚¤ï¼‰
```
1. ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼Aï¼ˆãƒ›ã‚¹ãƒˆï¼‰ãŒãƒ«ãƒ¼ãƒ ä½œæˆ
2. ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼Bã€CãŒå‚åŠ 
3. å…¨å“¡ãŒæº–å‚™å®Œäº†
4. ãƒ›ã‚¹ãƒˆãŒã‚²ãƒ¼ãƒ é–‹å§‹
5. å½¹è·é…å¸ƒ â†’ å…¨å“¡ãŒç¢ºèª
6. ãŠé¡Œç¢ºèª â†’ ãƒã‚¹ã‚¿ãƒ¼/ã‚¤ãƒ³ã‚µã‚¤ãƒ€ãƒ¼ãŒç¢ºèª
7. è³ªå•ãƒ•ã‚§ãƒ¼ã‚º â†’ ãƒã‚¹ã‚¿ãƒ¼ãŒæ­£è§£å ±å‘Š
8. è¨è«–ãƒ•ã‚§ãƒ¼ã‚º â†’ è‡ªå‹•é·ç§»
9. ç¬¬ä¸€æŠ•ç¥¨ â†’ å…¨å“¡ãŒæŠ•ç¥¨
10. ç¬¬äºŒæŠ•ç¥¨ â†’ å…¨å“¡ãŒæŠ•ç¥¨
11. çµæœè¡¨ç¤º â†’ å½¹è·å…¬é–‹
```

**æ¤œè¨¼ãƒã‚¤ãƒ³ãƒˆ**:
- âœ… RealtimeåŒæœŸ: ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å‚åŠ /é€€å‡ºãŒãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«åæ˜ ã•ã‚Œã‚‹ã‹
- âœ… ãƒ•ã‚§ãƒ¼ã‚ºé·ç§»: å„ãƒ•ã‚§ãƒ¼ã‚ºãŒæ­£ã—ãé·ç§»ã™ã‚‹ã‹
- âœ… æŠ•ç¥¨é›†è¨ˆ: å…¨å“¡ãŒæŠ•ç¥¨å¾Œã€è‡ªå‹•çš„ã«æ¬¡ãƒ•ã‚§ãƒ¼ã‚ºã¸é·ç§»ã™ã‚‹ã‹
- âœ… RLSãƒãƒªã‚·ãƒ¼: å½¹è·ãƒ»ãŠé¡ŒãŒæ­£ã—ãç§˜åŒ¿ã•ã‚Œã¦ã„ã‚‹ã‹
- âœ… ã‚¿ã‚¤ãƒãƒ¼åŒæœŸ: å„ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ã‚¿ã‚¤ãƒãƒ¼è¡¨ç¤ºã«ã‚ºãƒ¬ãŒãªã„ã‹

##### ã‚·ãƒŠãƒªã‚ª2: ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹
```
1. é€”ä¸­å‚åŠ ãƒ»é€”ä¸­é€€å‡ºã®ãƒ†ã‚¹ãƒˆ
2. ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯åˆ‡æ–­æ™‚ã®å†æ¥ç¶šãƒ†ã‚¹ãƒˆ
3. åŒç¥¨æ™‚ã®æ±ºé¸æŠ•ç¥¨ãƒ•ãƒ­ãƒ¼
4. ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ™‚ã®çµæœåˆ¤å®š
5. åŒæ™‚æ“ä½œæ™‚ã®æ’ä»–åˆ¶å¾¡ï¼ˆãƒ›ã‚¹ãƒˆãŒåŒæ™‚ã«ã‚²ãƒ¼ãƒ é–‹å§‹ã‚’æŠ¼ã™ç­‰ï¼‰
```

**1.3 ãƒ†ã‚¹ãƒˆè¨˜éŒ²**
- ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã€å‹•ç”»éŒ²ç”»ã‚’æ´»ç”¨
- ç™ºè¦‹ã—ãŸå•é¡Œã‚’ `docs/PHASE_5_TEST_RESULTS.md` ã«è¨˜éŒ²
- å†ç¾æ‰‹é †ã€ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€æœŸå¾…å‹•ä½œã‚’æ˜è¨˜

#### æˆæœç‰©
- âœ… `docs/PHASE_5_E2E_TEST_SCENARIOS.md` - ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ªè©³ç´°
- âœ… `docs/PHASE_5_TEST_RESULTS.md` - ãƒ†ã‚¹ãƒˆçµæœãƒ¬ãƒãƒ¼ãƒˆ
- âœ… ç™ºè¦‹ã•ã‚ŒãŸå•é¡Œã®ä¿®æ­£

---

### 2. UIãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯æ”¹å–„ (Week 9 - Day 3-4)

#### ç›®æ¨™
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚¢ãƒ—ãƒªã®çŠ¶æ…‹ã‚’é©åˆ‡ã«ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã—ã€å¾…æ©Ÿæ™‚é–“ã®ã‚¹ãƒˆãƒ¬ã‚¹ã‚’è»½æ¸›ã™ã‚‹ã€‚

#### å®Ÿæ–½å†…å®¹

**2.1 ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤ºã®å®Ÿè£…**

APIé€šä¿¡ä¸­ã‚„ãƒ•ã‚§ãƒ¼ã‚ºé·ç§»ä¸­ã«ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å‡¦ç†çŠ¶æ³ã‚’é€šçŸ¥ã—ã¾ã™ã€‚

**å®Ÿè£…ç®‡æ‰€**:
```
components/ui/
  loading-spinner.tsx     # æ±ç”¨ã‚¹ãƒ”ãƒŠãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
  loading-overlay.tsx     # å…¨ç”»é¢ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤
  skeleton-loader.tsx     # ã‚¹ã‚±ãƒ«ãƒˆãƒ³ãƒ­ãƒ¼ãƒ€ãƒ¼
```

**ä½¿ç”¨ä¾‹**:
```typescript
// app/lobby/page.tsx
const handleStartGame = async () => {
  setIsLoading(true);
  try {
    await api.startGame(roomId);
  } catch (error) {
    toast.error('ã‚²ãƒ¼ãƒ é–‹å§‹ã«å¤±æ•—ã—ã¾ã—ãŸ');
  } finally {
    setIsLoading(false);
  }
};

return (
  <>
    {isLoading && <LoadingOverlay message="ã‚²ãƒ¼ãƒ ã‚’é–‹å§‹ã—ã¦ã„ã¾ã™..." />}
    {/* ... */}
  </>
);
```

**2.2 ãƒˆãƒ¼ã‚¹ãƒˆé€šçŸ¥ã®å®Ÿè£…**

ã‚¨ãƒ©ãƒ¼ã€æˆåŠŸã€æƒ…å ±ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ãƒˆãƒ¼ã‚¹ãƒˆã§è¡¨ç¤ºã—ã¾ã™ã€‚

**ä½¿ç”¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒª**: `sonner` (è»½é‡ã§React 19å¯¾å¿œ)

```bash
npm install sonner
```

**å®Ÿè£…å†…å®¹**:
```typescript
// components/toaster.tsx
'use client';
import { Toaster } from 'sonner';

export function ToasterProvider() {
  return (
    <Toaster
      position="top-center"
      toastOptions={{
        style: {
          background: 'hsl(var(--card))',
          color: 'hsl(var(--card-foreground))',
          border: '1px solid hsl(var(--border))',
        },
      }}
    />
  );
}
```

```typescript
// app/layout.tsx
import { ToasterProvider } from '@/components/toaster';

export default function RootLayout({ children }) {
  return (
    <html lang="ja">
      <body>
        {children}
        <ToasterProvider />
      </body>
    </html>
  );
}
```

**ä½¿ç”¨ä¾‹**:
```typescript
import { toast } from 'sonner';

// æˆåŠŸé€šçŸ¥
toast.success('ãƒ«ãƒ¼ãƒ ã«å‚åŠ ã—ã¾ã—ãŸ');

// ã‚¨ãƒ©ãƒ¼é€šçŸ¥
toast.error('ãƒ«ãƒ¼ãƒ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ');

// æƒ…å ±é€šçŸ¥
toast.info('ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒå‚åŠ ã—ã¾ã—ãŸ');

// ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä»˜ã
const promise = api.createRoom(passphrase, nickname);
toast.promise(promise, {
  loading: 'ãƒ«ãƒ¼ãƒ ã‚’ä½œæˆä¸­...',
  success: 'ãƒ«ãƒ¼ãƒ ä½œæˆå®Œäº†ï¼',
  error: 'ãƒ«ãƒ¼ãƒ ä½œæˆã«å¤±æ•—ã—ã¾ã—ãŸ',
});
```

**2.3 ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®å¼·åŒ–**

**æ—¢å­˜ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**:
```typescript
// lib/api.ts
export async function createRoom(passphrase: string, nickname: string) {
  try {
    const { data, error } = await supabase.from('rooms').insert({...});
    if (error) throw error;
    return data;
  } catch (error) {
    console.error('Room creation error:', error);
    throw error;
  }
}
```

**æ”¹å–„ç‰ˆï¼ˆå‹å®‰å…¨ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼‰**:
```typescript
// lib/errors.ts
export class APIError extends Error {
  constructor(
    message: string,
    public code: string,
    public statusCode: number
  ) {
    super(message);
    this.name = 'APIError';
  }
}

export const ERROR_MESSAGES = {
  ROOM_NOT_FOUND: 'ãƒ«ãƒ¼ãƒ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ',
  INVALID_PASSPHRASE: 'åˆè¨€è‘‰ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“',
  DUPLICATE_NICKNAME: 'ã“ã®åå‰ã¯æ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™',
  NETWORK_ERROR: 'ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ',
  SESSION_EXPIRED: 'ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒæœŸé™åˆ‡ã‚Œã§ã™',
} as const;
```

```typescript
// lib/api.ts
export async function createRoom(passphrase: string, nickname: string) {
  try {
    const { data, error } = await supabase.from('rooms').insert({...});
    
    if (error) {
      // Supabaseã‚¨ãƒ©ãƒ¼ã‚’åˆ†é¡
      if (error.code === '23505') {
        throw new APIError(
          ERROR_MESSAGES.DUPLICATE_NICKNAME,
          'DUPLICATE_NICKNAME',
          409
        );
      }
      throw new APIError(error.message, 'DB_ERROR', 500);
    }
    
    return data;
  } catch (error) {
    if (error instanceof APIError) throw error;
    
    // ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼
    if (!navigator.onLine) {
      throw new APIError(
        ERROR_MESSAGES.NETWORK_ERROR,
        'NETWORK_ERROR',
        0
      );
    }
    
    throw new APIError('äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ', 'UNKNOWN', 500);
  }
}
```

**2.4 å†æ¥ç¶šå‡¦ç†ã®å®Ÿè£…**

ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯åˆ‡æ–­æ™‚ã®è‡ªå‹•å†æ¥ç¶šã‚’å®Ÿè£…ã—ã¾ã™ã€‚

```typescript
// context/RoomContext.tsx
useEffect(() => {
  const handleOnline = () => {
    toast.info('æ¥ç¶šãŒå¾©æ—§ã—ã¾ã—ãŸ');
    // Realtimeãƒãƒ£ãƒ³ãƒãƒ«ã®å†è³¼èª­
    if (roomId) {
      subscribeToRoom(roomId);
    }
  };

  const handleOffline = () => {
    toast.warning('æ¥ç¶šãŒåˆ‡æ–­ã•ã‚Œã¾ã—ãŸ');
  };

  window.addEventListener('online', handleOnline);
  window.addEventListener('offline', handleOffline);

  return () => {
    window.removeEventListener('online', handleOnline);
    window.removeEventListener('offline', handleOffline);
  };
}, [roomId]);
```

**2.5 é€²è¡ŒçŠ¶æ³ã®å¯è¦–åŒ–**

å„ãƒ•ã‚§ãƒ¼ã‚ºã§ã€Œä½•äººãŒã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®Œäº†ã—ãŸã‹ã€ã‚’æ˜ç¤ºçš„ã«è¡¨ç¤ºã—ã¾ã™ã€‚

```typescript
// components/progress-indicator.tsx
interface ProgressIndicatorProps {
  current: number;
  total: number;
  label: string;
}

export function ProgressIndicator({ current, total, label }: ProgressIndicatorProps) {
  const percentage = (current / total) * 100;
  
  return (
    <div className="space-y-2">
      <div className="flex items-center justify-between text-sm">
        <span className="text-muted-foreground">{label}</span>
        <span className="font-medium">
          {current} / {total}
        </span>
      </div>
      <div className="h-2 overflow-hidden rounded-full bg-game-red/20">
        <div
          className="h-full bg-game-red transition-all duration-300"
          style={{ width: `${percentage}%` }}
        />
      </div>
    </div>
  );
}
```

**ä½¿ç”¨ä¾‹ï¼ˆå½¹è·ç¢ºèªç”»é¢ï¼‰**:
```typescript
// app/game/role/page.tsx
<ProgressIndicator
  current={confirmedCount}
  total={totalPlayers}
  label="å½¹è·ã‚’ç¢ºèªã—ãŸãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼"
/>
```

#### æˆæœç‰©
- âœ… `components/ui/loading-spinner.tsx`
- âœ… `components/ui/loading-overlay.tsx`
- âœ… `components/toaster.tsx`
- âœ… `lib/errors.ts`
- âœ… `components/progress-indicator.tsx`
- âœ… å…¨APIå‘¼ã³å‡ºã—ã«ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°è¿½åŠ 
- âœ… ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®å†æ¥ç¶šå‡¦ç†å®Ÿè£…

---

### 3. æŠ•ç¥¨ãƒ­ã‚¸ãƒƒã‚¯ã®æ”¹å–„ (Week 9 - Day 5)

#### ç›®æ¨™
`Status.md` ã§æŒ‡æ‘˜ã•ã‚ŒãŸã€ŒVote1ã‹ã‚‰Resultã¸ã®è‡ªå‹•é·ç§»ã®ä¸å®‰å®šæ€§ã€ã‚’è§£æ±ºã™ã‚‹ã€‚

#### å•é¡Œåˆ†æ

**ç¾çŠ¶ã®å®Ÿè£…ï¼ˆæ¨æ¸¬ï¼‰**:
```typescript
// app/game/vote1/page.tsx
useEffect(() => {
  if (allVoted && voteResult) {
    // å…¨å“¡ãŒæŠ•ç¥¨å®Œäº† â†’ è‡ªå‹•é·ç§»
    router.push(`/game/vote2?room=${roomId}`);
  }
}, [allVoted, voteResult]);
```

**å•é¡Œç‚¹**:
- å„ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒç‹¬ç«‹ã—ã¦ `allVoted` ã‚’åˆ¤å®šã™ã‚‹ãŸã‚ã€ç«¶åˆçŠ¶æ…‹ãŒç™ºç”Ÿ
- RealtimeåŒæœŸã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã«ã‚ˆã£ã¦ã¯ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆé–“ã§çŠ¶æ…‹ãŒä¸€è‡´ã—ãªã„
- ãƒ•ã‚§ãƒ¼ã‚ºé·ç§»ãŒã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã§å®Œçµã—ã¦ãŠã‚Šã€ã‚µãƒ¼ãƒãƒ¼å´ã®ã€Œä¿¡é ¼ã§ãã‚‹å˜ä¸€ã®çŠ¶æ…‹ã€ãŒãªã„

#### è§£æ±ºç­–

**ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ1: ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰é›†è¨ˆ + ãƒ•ã‚§ãƒ¼ã‚ºæ›´æ–°ï¼ˆæ¨å¥¨ï¼‰**

Edge Functionã¾ãŸã¯Database Triggerã§æŠ•ç¥¨ã‚’é›†è¨ˆã—ã€å…¨å“¡æŠ•ç¥¨å®Œäº†æ™‚ã«è‡ªå‹•çš„ã«ãƒ•ã‚§ãƒ¼ã‚ºã‚’æ›´æ–°ã—ã¾ã™ã€‚

**å®Ÿè£…å†…å®¹**:

**3.1 Database Trigger ã®ä½œæˆ**

```sql
-- supabase/migrations/20251123_vote_trigger.sql

-- æŠ•ç¥¨é›†è¨ˆç”¨é–¢æ•°
CREATE OR REPLACE FUNCTION check_vote_completion()
RETURNS TRIGGER AS $$
DECLARE
  v_session_id UUID;
  v_total_players INT;
  v_voted_players INT;
  v_vote_type TEXT;
  v_phase TEXT;
BEGIN
  -- æŠ•ç¥¨ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³IDã¨ã‚¿ã‚¤ãƒ—ã‚’å–å¾—
  v_session_id := NEW.session_id;
  v_vote_type := NEW.vote_type;
  
  -- ç¾åœ¨ã®ãƒ•ã‚§ãƒ¼ã‚ºã‚’å–å¾—
  SELECT phase INTO v_phase
  FROM game_sessions
  WHERE id = v_session_id;
  
  -- æŠ•ç¥¨ã‚¿ã‚¤ãƒ—ã¨ãƒ•ã‚§ãƒ¼ã‚ºãŒä¸€è‡´ã—ãªã„å ´åˆã¯ä½•ã‚‚ã—ãªã„
  IF NOT ((v_vote_type = 'VOTE1' AND v_phase = 'VOTE1') OR
          (v_vote_type = 'VOTE2' AND v_phase = 'VOTE2')) THEN
    RETURN NEW;
  END IF;
  
  -- ç·ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æ•°ã‚’å–å¾—
  SELECT COUNT(*) INTO v_total_players
  FROM roles
  WHERE session_id = v_session_id;
  
  -- æŠ•ç¥¨æ¸ˆã¿ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æ•°ã‚’å–å¾—
  SELECT COUNT(DISTINCT player_id) INTO v_voted_players
  FROM votes
  WHERE session_id = v_session_id
    AND vote_type = v_vote_type;
  
  -- å…¨å“¡ãŒæŠ•ç¥¨å®Œäº†ã—ãŸå ´åˆ
  IF v_voted_players >= v_total_players THEN
    IF v_vote_type = 'VOTE1' THEN
      -- VOTE1å®Œäº† â†’ ãƒ•ã‚§ãƒ¼ã‚ºã‚’VOTE2ã«æ›´æ–°
      UPDATE game_sessions
      SET phase = 'VOTE2'
      WHERE id = v_session_id;
    ELSIF v_vote_type = 'VOTE2' THEN
      -- VOTE2å®Œäº† â†’ çµæœã‚’è¨ˆç®—ã—ã¦RESULTã«æ›´æ–°
      -- (çµæœè¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã¯åˆ¥é€”Edge Functionã§å®Ÿè£…)
      UPDATE game_sessions
      SET phase = 'RESULT'
      WHERE id = v_session_id;
    END IF;
  END IF;
  
  RETURN NEW;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

-- ãƒˆãƒªã‚¬ãƒ¼ã®ä½œæˆ
DROP TRIGGER IF EXISTS trigger_check_vote_completion ON votes;
CREATE TRIGGER trigger_check_vote_completion
  AFTER INSERT ON votes
  FOR EACH ROW
  EXECUTE FUNCTION check_vote_completion();
```

**3.2 ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã®ä¿®æ­£**

ãƒ•ã‚§ãƒ¼ã‚ºé·ç§»ã¯ã‚µãƒ¼ãƒãƒ¼ï¼ˆTriggerï¼‰ã«ä»»ã›ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¯ `game_sessions.phase` ã®å¤‰æ›´ã‚’ãƒªãƒƒã‚¹ãƒ³ã—ã¦ç”»é¢é·ç§»ã—ã¾ã™ã€‚

```typescript
// context/GameContext.tsx
useEffect(() => {
  if (!sessionId) return;

  // game_sessions ã® phase å¤‰æ›´ã‚’ç›£è¦–
  const channel = supabase
    .channel(`session:${sessionId}`)
    .on(
      'postgres_changes',
      {
        event: 'UPDATE',
        schema: 'public',
        table: 'game_sessions',
        filter: `id=eq.${sessionId}`,
      },
      (payload) => {
        const newPhase = payload.new.phase;
        console.log('Phase changed to:', newPhase);
        
        // ãƒ­ãƒ¼ã‚«ãƒ«çŠ¶æ…‹ã‚’æ›´æ–°
        setPhase(newPhase);
        
        // ç”»é¢é·ç§»
        router.push(`/game/${newPhase.toLowerCase()}`);
      }
    )
    .subscribe();

  return () => {
    supabase.removeChannel(channel);
  };
}, [sessionId]);
```

```typescript
// app/game/vote1/page.tsx
const handleVote = async (vote: 'YES' | 'NO') => {
  try {
    setIsVoting(true);
    
    // æŠ•ç¥¨ã‚’DBã«ä¿å­˜ï¼ˆTriggerãŒè‡ªå‹•çš„ã«ãƒ•ã‚§ãƒ¼ã‚ºé·ç§»ã‚’åˆ¤å®šï¼‰
    const { error } = await supabase.from('votes').insert({
      session_id: sessionId,
      player_id: playerId,
      vote_type: 'VOTE1',
      vote_value: vote,
    });
    
    if (error) throw error;
    
    setHasVoted(true);
    toast.success('æŠ•ç¥¨ã—ã¾ã—ãŸ');
    
    // ãƒ•ã‚§ãƒ¼ã‚ºé·ç§»ã¯ GameContext ã® Realtime ãƒªã‚¹ãƒŠãƒ¼ãŒè‡ªå‹•å‡¦ç†
    
  } catch (error) {
    console.error('Vote error:', error);
    toast.error('æŠ•ç¥¨ã«å¤±æ•—ã—ã¾ã—ãŸ');
  } finally {
    setIsVoting(false);
  }
};
```

**3.3 æŠ•ç¥¨çŠ¶æ³ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤º**

ä»–ã®ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒæŠ•ç¥¨ã—ãŸã“ã¨ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«è¡¨ç¤ºã—ã¾ã™ã€‚

```typescript
// app/game/vote1/page.tsx
useEffect(() => {
  if (!sessionId) return;

  // votes ãƒ†ãƒ¼ãƒ–ãƒ«ã®å¤‰æ›´ã‚’ç›£è¦–
  const channel = supabase
    .channel(`votes:${sessionId}`)
    .on(
      'postgres_changes',
      {
        event: 'INSERT',
        schema: 'public',
        table: 'votes',
        filter: `session_id=eq.${sessionId}`,
      },
      (payload) => {
        // æŠ•ç¥¨æ•°ã‚’æ›´æ–°
        setVotedCount((prev) => prev + 1);
      }
    )
    .subscribe();

  return () => {
    supabase.removeChannel(channel);
  };
}, [sessionId]);

return (
  <>
    <ProgressIndicator
      current={votedCount}
      total={totalPlayers}
      label="æŠ•ç¥¨æ¸ˆã¿ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼"
    />
    {/* ... */}
  </>
);
```

#### æˆæœç‰©
- âœ… `supabase/migrations/20251123_vote_trigger.sql`
- âœ… `context/GameContext.tsx` ã®ãƒ•ã‚§ãƒ¼ã‚ºå¤‰æ›´ãƒªã‚¹ãƒŠãƒ¼å®Ÿè£…
- âœ… `app/game/vote1/page.tsx`, `app/game/vote2/page.tsx` ã®ä¿®æ­£
- âœ… æŠ•ç¥¨çŠ¶æ³ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤ºå®Ÿè£…
- âœ… è¤‡æ•°ãƒ–ãƒ©ã‚¦ã‚¶ã§å‹•ä½œæ¤œè¨¼

---

### 4. ãƒ‡ãƒ—ãƒ­ã‚¤æº–å‚™ (Week 10 - Day 1-2)

#### ç›®æ¨™
Vercelã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’å®Œäº†ã—ã€æœ¬ç•ªç’°å¢ƒã§ã®å‹•ä½œç¢ºèªã‚’è¡Œã†ã€‚

#### å®Ÿæ–½å†…å®¹

**4.1 ç’°å¢ƒå¤‰æ•°ã®æ•´ç†**

**é–‹ç™ºç’°å¢ƒï¼ˆ`.env.local`ï¼‰**:
```env
NEXT_PUBLIC_SUPABASE_URL=https://qqvxtmjyrjbzemxnfdwy.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJ...
```

**æœ¬ç•ªç’°å¢ƒï¼ˆVercel Environment Variablesï¼‰**:
- `NEXT_PUBLIC_SUPABASE_URL`: Supabase Project URL
- `NEXT_PUBLIC_SUPABASE_ANON_KEY`: Supabase Anon/Public Key

**4.2 Vercelãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ**

```bash
# Vercel CLIã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆåˆå›ã®ã¿ï¼‰
npm install -g vercel

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã§å®Ÿè¡Œ
cd app-v2
vercel login
vercel
```

**è¨­å®šé …ç›®**:
- Framework Preset: **Next.js**
- Root Directory: `app-v2`
- Build Command: `npm run build`
- Output Directory: `.next`
- Install Command: `npm install`

**4.3 ç’°å¢ƒå¤‰æ•°ã®è¨­å®š**

Vercelãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ä»¥ä¸‹ã‚’è¨­å®š:
1. Settings â†’ Environment Variables
2. `NEXT_PUBLIC_SUPABASE_URL` ã‚’è¿½åŠ 
3. `NEXT_PUBLIC_SUPABASE_ANON_KEY` ã‚’è¿½åŠ 
4. Environment: **Production**, **Preview**, **Development** ã™ã¹ã¦ã«ãƒã‚§ãƒƒã‚¯

**4.4 ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³ã®è¨­å®šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰**

```
insider-game.vercel.app
```

ã¾ãŸã¯ç‹¬è‡ªãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’è¨­å®š:
```
insider-game.yourdomain.com
```

**4.5 ãƒ‡ãƒ—ãƒ­ã‚¤**

```bash
# æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤
vercel --prod
```

**4.6 æœ¬ç•ªç’°å¢ƒã§ã®å‹•ä½œç¢ºèª**

ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã€ä»¥ä¸‹ã‚’ç¢ºèª:
- âœ… ãƒ«ãƒ¼ãƒ ä½œæˆãƒ»å‚åŠ ãŒå‹•ä½œã™ã‚‹ã‹
- âœ… Supabaseã¸ã®æ¥ç¶šãŒæˆåŠŸã™ã‚‹ã‹
- âœ… RealtimeãŒæ­£ã—ãæ©Ÿèƒ½ã™ã‚‹ã‹
- âœ… Edge FunctionsãŒå‘¼ã³å‡ºã•ã‚Œã‚‹ã‹
- âœ… ãƒ¢ãƒã‚¤ãƒ«ãƒ–ãƒ©ã‚¦ã‚¶ã§ã®å‹•ä½œç¢ºèªï¼ˆiOS Safari, Android Chromeï¼‰

**4.7 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–**

Vercel Analyticsã§ç¢ºèªã™ã¹ãé …ç›®:
- **Lighthouse Score**: 90ç‚¹ä»¥ä¸Šã‚’ç›®æŒ‡ã™
- **First Contentful Paint (FCP)**: 1.8ç§’ä»¥å†…
- **Largest Contentful Paint (LCP)**: 2.5ç§’ä»¥å†…
- **Time to Interactive (TTI)**: 3.8ç§’ä»¥å†…

æ”¹å–„æ–½ç­–:
```typescript
// next.config.mjs
const nextConfig = {
  images: {
    formats: ['image/avif', 'image/webp'],
  },
  compress: true,
  poweredByHeader: false,
};
```

**4.8 ã‚¨ãƒ©ãƒ¼ç›£è¦–ã®è¨­å®šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰**

Vercel ã® [Monitoring] ã‚¿ãƒ–ã§ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’ç¢ºèªã§ãã¾ã™ãŒã€ã‚ˆã‚Šè©³ç´°ãªç›£è¦–ã«ã¯ Sentry ç­‰ã®å°å…¥ã‚’æ¤œè¨:

```bash
npm install @sentry/nextjs
npx @sentry/wizard@latest -i nextjs
```

#### æˆæœç‰©
- âœ… Vercelãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
- âœ… ç’°å¢ƒå¤‰æ•°è¨­å®š
- âœ… æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†
- âœ… æœ¬ç•ªç’°å¢ƒã§ã®å‹•ä½œç¢ºèªãƒ¬ãƒãƒ¼ãƒˆ
- âœ… `docs/DEPLOYMENT_GUIDE.md` - ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †æ›¸

---

### 5. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™ (Week 10 - Day 3)

#### ç›®æ¨™
Phase 5ã®æˆæœã‚’åæ˜ ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŠã‚ˆã³é–‹ç™ºè€…å‘ã‘ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æœ€æ–°åŒ–ã™ã‚‹ã€‚

#### å®Ÿæ–½å†…å®¹

**5.1 README.md ã®æ›´æ–°**

`README.md` ã‚’æ›´æ–°ã—ã€Phase 5å®Œäº†ã‚’åæ˜ :

**æ›´æ–°ç®‡æ‰€**:
```diff
## ğŸš§ é–‹ç™ºä¸­ãƒ»è¨ˆç”»ä¸­ã®æ©Ÿèƒ½

- ### Phase 4: Supabase çµ±åˆ (æ¬¡ãƒ•ã‚§ãƒ¼ã‚º)
- - ğŸ”² ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã®ä½œæˆãƒ»ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- - ğŸ”² Supabase Edge Functions ã®ãƒ‡ãƒ—ãƒ­ã‚¤
+ ### Phase 4: Supabase çµ±åˆ
+ - âœ… ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã®ä½œæˆãƒ»ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
+ - âœ… Supabase Edge Functions ã®ãƒ‡ãƒ—ãƒ­ã‚¤
+   - å½¹è·é…å¸ƒãƒ­ã‚¸ãƒƒã‚¯ (`assign-roles`)
+   - ãŠé¡Œé¸æŠãƒ­ã‚¸ãƒƒã‚¯ (`select-topic`)
+ - âœ… åŒ¿åèªè¨¼ã®å®Ÿè£…
+ - âœ… ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸï¼ˆSupabase Realtimeï¼‰
+ - âœ… Mock API ã‹ã‚‰ Supabase Client ã¸ã®ç§»è¡Œ
+ - âœ… Row Level Security (RLS) ã®è¨­å®š

- ### Phase 5: ãƒ†ã‚¹ãƒˆãƒ»æœ€é©åŒ–
- - ğŸ”² ãƒãƒ«ãƒãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã§ã®ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ
+ ### Phase 5: UI/UXæ”¹å–„ & ãƒ‡ãƒ—ãƒ­ã‚¤
+ - âœ… ãƒãƒ«ãƒãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã§ã®E2Eãƒ†ã‚¹ãƒˆ
+ - âœ… UIãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯æ”¹å–„ï¼ˆãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã€ãƒˆãƒ¼ã‚¹ãƒˆã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼‰
+ - âœ… æŠ•ç¥¨ãƒ­ã‚¸ãƒƒã‚¯ã®æ”¹å–„ï¼ˆDatabase Trigger ã«ã‚ˆã‚‹è‡ªå‹•é·ç§»ï¼‰
+ - âœ… Vercelã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤
+ - âœ… æœ¬ç•ªç’°å¢ƒã§ã®å‹•ä½œç¢ºèª

- ### Phase 6: ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ»é‹ç”¨
- - ğŸ”² Vercel ã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤
+ ### ä»Šå¾Œã®æ”¹å–„äºˆå®š
+ - ğŸ”² SEOæœ€é©åŒ–ï¼ˆOGPã€ãƒ¡ã‚¿ã‚¿ã‚°ï¼‰
+ - ğŸ”² PWAå¯¾å¿œï¼ˆã‚ªãƒ•ãƒ©ã‚¤ãƒ³å‹•ä½œã€ãƒ›ãƒ¼ãƒ ç”»é¢è¿½åŠ ï¼‰
+ - ğŸ”² å¤šè¨€èªå¯¾å¿œï¼ˆè‹±èªã€ä¸­å›½èªï¼‰
```

**5.2 ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †æ›¸ã®ä½œæˆ**

æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ« `docs/DEPLOYMENT_GUIDE.md` ã‚’ä½œæˆ:

```markdown
# ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¬ã‚¤ãƒ‰

## å‰ææ¡ä»¶
- Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒä½œæˆæ¸ˆã¿
- Vercelã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä¿æœ‰

## æ‰‹é †

### 1. Supabaseè¨­å®š
1. Supabaseãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ç’°å¢ƒå¤‰æ•°ã‚’å–å¾—
2. Database Migrationsã‚’é©ç”¨
3. Edge Functionsã‚’ãƒ‡ãƒ—ãƒ­ã‚¤

### 2. Vercelãƒ‡ãƒ—ãƒ­ã‚¤
1. Vercel CLIã§ãƒ­ã‚°ã‚¤ãƒ³: `vercel login`
2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒªãƒ³ã‚¯: `vercel`
3. ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š
4. æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤: `vercel --prod`

### 3. å‹•ä½œç¢ºèª
- ãƒ«ãƒ¼ãƒ ä½œæˆãƒ»å‚åŠ 
- ã‚²ãƒ¼ãƒ ãƒ•ãƒ­ãƒ¼å…¨ä½“
- ãƒ¢ãƒã‚¤ãƒ«ãƒ–ãƒ©ã‚¦ã‚¶ã§ã®æ¤œè¨¼
```

**5.3 Status.md ã®æ›´æ–°**

`Status.md` ã‚’ Phase 5å®Œäº†ç‰ˆã«æ›´æ–°:

```diff
- **å¯¾è±¡ãƒ•ã‚§ãƒ¼ã‚º**: Phase 4 (Supabaseçµ±åˆ) - ãƒ†ã‚¹ãƒˆå®Œäº†
+ **å¯¾è±¡ãƒ•ã‚§ãƒ¼ã‚º**: Phase 5 (UI/UXæ”¹å–„ & ãƒ‡ãƒ—ãƒ­ã‚¤) - å®Œäº†

- ## 2. æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ— (Phase 5: UI/UXæ”¹å–„ & ãƒ‡ãƒ—ãƒ­ã‚¤)
+ ## 2. Phase 5 å®Œäº†å†…å®¹

+ ### 2.1 å®Ÿæ–½æ¸ˆã¿ã‚¿ã‚¹ã‚¯
+ - âœ… è¤‡æ•°ãƒ–ãƒ©ã‚¦ã‚¶ã§ã®E2Eãƒ†ã‚¹ãƒˆï¼ˆ3-5äººãƒ—ãƒ¬ã‚¤ã§ã®æ¤œè¨¼ï¼‰
+ - âœ… UIãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯æ”¹å–„ï¼ˆãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã€ãƒˆãƒ¼ã‚¹ãƒˆã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼‰
+ - âœ… æŠ•ç¥¨ãƒ­ã‚¸ãƒƒã‚¯ã®æ”¹å–„ï¼ˆDatabase Triggerå°å…¥ï¼‰
+ - âœ… Vercelã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤
+ - âœ… ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™

+ ### 2.2 æ”¹å–„ã•ã‚ŒãŸæ—¢çŸ¥ã®èª²é¡Œ
+ - âœ… æŠ•ç¥¨ãƒ•ã‚§ãƒ¼ã‚ºã®è‡ªå‹•é·ç§»ãŒå®‰å®šåŒ–ï¼ˆDatabase Triggerå°å…¥ï¼‰
+ - âœ… ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®å¼·åŒ–ï¼ˆãƒˆãƒ¼ã‚¹ãƒˆé€šçŸ¥ã€å†æ¥ç¶šå‡¦ç†ï¼‰

+ ### 2.3 æ®‹å­˜èª²é¡Œ
+ - ã‚¿ã‚¤ãƒãƒ¼ã®å³å¯†ãªåŒæœŸï¼ˆEdge Functionã§ã®çµ‚äº†åˆ¤å®šï¼‰
+ - PWAå¯¾å¿œ
+ - SEOæœ€é©åŒ–
```

**5.4 ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³ã®ä½œæˆï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰**

ç¾åœ¨ã®ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’å¯è¦–åŒ–ã—ãŸå›³ã‚’ `docs/ARCHITECTURE.md` ã«è¿½åŠ :

```mermaid
graph TB
    subgraph "ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ (Next.js)"
        UI[UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ]
        Context[Context API]
        API[Supabase Client]
    end
    
    subgraph "Supabase Backend"
        Auth[Auth]
        DB[(PostgreSQL)]
        Realtime[Realtime]
        Functions[Edge Functions]
    end
    
    subgraph "Vercel"
        Deploy[ãƒ‡ãƒ—ãƒ­ã‚¤]
    end
    
    UI --> Context
    Context --> API
    API --> Auth
    API --> DB
    API --> Realtime
    API --> Functions
    
    Deploy --> UI
```

#### æˆæœç‰©
- âœ… `README.md` ã®æ›´æ–°
- âœ… `docs/DEPLOYMENT_GUIDE.md` ã®ä½œæˆ
- âœ… `Status.md` ã®æ›´æ–°
- âœ… `docs/ARCHITECTURE.md` ã®ä½œæˆï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

---

## ğŸ“Š Phase 5 å®Œäº†åŸºæº–

ä»¥ä¸‹ã®æ¡ä»¶ã‚’ã™ã¹ã¦æº€ãŸã—ãŸæ™‚ç‚¹ã§ Phase 5 å®Œäº†ã¨ã—ã¾ã™:

- [x] **E2Eãƒ†ã‚¹ãƒˆ**: 3äººä»¥ä¸Šã®ãƒãƒ«ãƒãƒ—ãƒ¬ã‚¤ã§å…¨ãƒ•ã‚§ãƒ¼ã‚ºãŒæ­£å¸¸å‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèª
- [x] **æŠ•ç¥¨ãƒ­ã‚¸ãƒƒã‚¯**: è¤‡æ•°ãƒ–ãƒ©ã‚¦ã‚¶ã§ã®æŠ•ç¥¨è‡ªå‹•é·ç§»ãŒå®‰å®šå‹•ä½œ
- [x] **UIãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯**: ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã€ãƒˆãƒ¼ã‚¹ãƒˆã€ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒé©åˆ‡ã«è¡¨ç¤ºã•ã‚Œã‚‹
- [x] **ãƒ‡ãƒ—ãƒ­ã‚¤**: Vercelæœ¬ç•ªç’°å¢ƒã§å‹•ä½œç¢ºèªå®Œäº†
- [x] **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: README.mdã€Status.mdã€DEPLOYMENT_GUIDE.md ãŒæœ€æ–°çŠ¶æ…‹

---

## ğŸ“ ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### Week 9 - Day 1-2: E2Eãƒ†ã‚¹ãƒˆ
- [ ] ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ªä½œæˆ (`docs/PHASE_5_E2E_TEST_SCENARIOS.md`)
- [ ] 3äººãƒ—ãƒ¬ã‚¤ã§ã®åŸºæœ¬ãƒ•ãƒ­ãƒ¼ãƒ†ã‚¹ãƒˆ
- [ ] ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆï¼ˆé€”ä¸­é€€å‡ºã€ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã€åŒç¥¨ç­‰ï¼‰
- [ ] ãƒ†ã‚¹ãƒˆçµæœãƒ¬ãƒãƒ¼ãƒˆä½œæˆ (`docs/PHASE_5_TEST_RESULTS.md`)

### Week 9 - Day 3-4: UIãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯æ”¹å–„
- [ ] `components/ui/loading-spinner.tsx` ä½œæˆ
- [ ] `components/ui/loading-overlay.tsx` ä½œæˆ
- [ ] `sonner` ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« & ãƒˆãƒ¼ã‚¹ãƒˆå®Ÿè£…
- [ ] `lib/errors.ts` - ã‚¨ãƒ©ãƒ¼ã‚¯ãƒ©ã‚¹å®šç¾©
- [ ] å…¨APIå‘¼ã³å‡ºã—ã«ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°è¿½åŠ 
- [ ] ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®å†æ¥ç¶šå‡¦ç†å®Ÿè£…
- [ ] `components/progress-indicator.tsx` ä½œæˆ
- [ ] å„ãƒ•ã‚§ãƒ¼ã‚ºã«é€²è¡ŒçŠ¶æ³è¡¨ç¤ºè¿½åŠ 

### Week 9 - Day 5: æŠ•ç¥¨ãƒ­ã‚¸ãƒƒã‚¯æ”¹å–„
- [ ] `supabase/migrations/20251123_vote_trigger.sql` ä½œæˆ
- [ ] Database Triggerã‚’ãƒ‡ãƒ—ãƒ­ã‚¤
- [ ] `context/GameContext.tsx` ã«ãƒ•ã‚§ãƒ¼ã‚ºå¤‰æ›´ãƒªã‚¹ãƒŠãƒ¼è¿½åŠ 
- [ ] `app/game/vote1/page.tsx` ä¿®æ­£
- [ ] `app/game/vote2/page.tsx` ä¿®æ­£
- [ ] æŠ•ç¥¨çŠ¶æ³ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤ºå®Ÿè£…
- [ ] è¤‡æ•°ãƒ–ãƒ©ã‚¦ã‚¶ã§å‹•ä½œæ¤œè¨¼

### Week 10 - Day 1-2: ãƒ‡ãƒ—ãƒ­ã‚¤æº–å‚™
- [ ] ç’°å¢ƒå¤‰æ•°ã®æ•´ç†
- [ ] Vercelãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
- [ ] ç’°å¢ƒå¤‰æ•°è¨­å®šï¼ˆVercelãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼‰
- [ ] æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤ (`vercel --prod`)
- [ ] æœ¬ç•ªç’°å¢ƒã§ã®å‹•ä½œç¢ºèª
- [ ] ãƒ¢ãƒã‚¤ãƒ«ãƒ–ãƒ©ã‚¦ã‚¶ã§ã®æ¤œè¨¼
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®šï¼ˆLighthouseï¼‰
- [ ] `docs/DEPLOYMENT_GUIDE.md` ä½œæˆ

### Week 10 - Day 3: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™
- [ ] `README.md` æ›´æ–°ï¼ˆPhase 5å®Œäº†ã‚’åæ˜ ï¼‰
- [ ] `Status.md` æ›´æ–°ï¼ˆPhase 5ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¨˜è¼‰ï¼‰
- [ ] `docs/ARCHITECTURE.md` ä½œæˆï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
- [ ] å…¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ãƒªãƒ³ã‚¯ç¢ºèª

---

## ğŸ¯ ã¾ã¨ã‚

Phase 5ã§ã¯ã€Phase 4ã§æ§‹ç¯‰ã—ãŸãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰åŸºç›¤ã®ä¸Šã«ã€**ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã®å‘ä¸Š**ã¨**æœ¬ç•ªé‹ç”¨ã®æº–å‚™**ã‚’è¡Œã„ã¾ã™ã€‚ç‰¹ã«ã€ä»¥ä¸‹ã®3ç‚¹ãŒé‡è¦ã§ã™:

1. **å®Ÿç’°å¢ƒã§ã®ãƒ†ã‚¹ãƒˆ**: ã‚·ãƒ³ã‚°ãƒ«ãƒ–ãƒ©ã‚¦ã‚¶ã§ã¯ç™ºè¦‹ã§ããªã„å•é¡Œï¼ˆåŒæœŸã€ç«¶åˆçŠ¶æ…‹ç­‰ï¼‰ã‚’æ´—ã„å‡ºã™
2. **æŠ•ç¥¨ãƒ­ã‚¸ãƒƒã‚¯ã®å®‰å®šåŒ–**: Database Triggerã‚’æ´»ç”¨ã—ã€ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ä¿¡é ¼æ€§ã®é«˜ã„ãƒ•ã‚§ãƒ¼ã‚ºé·ç§»ã‚’å®Ÿç¾
3. **UIãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã®å……å®Ÿ**: ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã€ãƒˆãƒ¼ã‚¹ãƒˆã€ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã‚’å‘ä¸Š

Phase 5å®Œäº†å¾Œã€ã‚¢ãƒ—ãƒªã¯**æœ¬ç•ªé‹ç”¨å¯èƒ½ãªçŠ¶æ…‹**ã¨ãªã‚Šã€å®Ÿéš›ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æä¾›ã§ãã‚‹ãƒ¬ãƒ™ãƒ«ã«åˆ°é”ã—ã¾ã™ã€‚

---

**å‚è€ƒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**:
- [Status.md](file:///Users/masaki/Documents/Projects/Insider_game/docs/Status.md) - Phase 4å®Œäº†å ±å‘Š
- [IMPLEMENTATION_PLAN.md](file:///Users/masaki/Documents/Projects/Insider_game/docs/IMPLEMENTATION_PLAN.md) - å…¨ä½“å®Ÿè£…è¨ˆç”»
- [SUPABASE_MIGRATION_PLAN.md](file:///Users/masaki/Documents/Projects/Insider_game/docs/SUPABASE_MIGRATION_PLAN.md) - Supabaseçµ±åˆè¨ˆç”»
